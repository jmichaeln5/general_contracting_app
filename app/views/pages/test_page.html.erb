
<h1>Test Page</h1>


<p id="notice"><%#= notice %></p>

<!-- Button trigger modal -->

<div class="card py-5 text-center">
  <%= link_to "View My Properties", user_properties_path(current_user), class:"display-4 no-decoration-link" %>
</div>


<br>
<hr>
<br>

<div class="card container text-center py-5">

  <%= link_to 'Add New Property',  new_user_property_path(current_user), class:"btn-success btn-lg", style: 'color:#FFFFFF;' %>

  <br>
  <div id="map"></div>
  <br> <hr>
  <div class="tex">
  <%= link_to 'Back', :back, class:"btn btn-primary", style: 'color:#FFFFFF;' %>
  </div>
  <br>
</div>

<script>
      function initMap() {

        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 2.9,
          center: {lat: 38.81201, lng: -97.504928}
        });

        var labels = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        var commaSeperatedLabels = labels.split('')

        // alert(labels.split(''))

        var locations = []

        <% @properties.each do |location| %>
          var lat = <%= location.lat %>;
          var lng = <%= location.lng %>;
          locations.push({"lat":lat,"lng":lng})
        <% end %>

        var chars = "overpopulation".split('');
        var markers = locations.map(function(location, i) {
          return new google.maps.Marker({
            position: location,
            label: labels[i % labels.length]
          });
        });

        // Add a marker clusterer to manage the markers.
        var markerCluster = new MarkerClusterer(map, markers,
            {imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'});

      }
</script>


<script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js">
</script>

<script async defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDUrlQaMPYAMf2W6vaHFF7ufv-Bp6A7dZo&callback=initMap">
</script>
